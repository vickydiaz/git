{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/ReactHillBrewing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/ReactHillBrewing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{url}from'../config';export var CHANGE_EDIT_MODE='CHANGE_EDIT_MODE';export var ClOSE_ADD_CATEGORY_FORM='CLOSE_ADD_CATEGORY_FORM';export var SAVE_RECIPE='SAVE_RECIPE';export var SELECT_EDIT_RECIPE='SELECT_EDIT_RECIPE';export var ClEAR_EDIT_STATE='CLEAR_EDIT_STATE';export var GET_CATEGORIES='GET_CATEGORIES';export var GET_ALL_RECIPES='GET_ALL_RECIPES';export var SELECT_CATEGORY='SELECT_CATEGORY';export var DELETE_RECIPE='DELETE_RECIPE';// Get categories\nexport var getCategories=function getCategories(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(url,\"/api/categories\"));case 3:res=_context.sent;dispatch({type:GET_CATEGORIES,payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Select category\nexport var selectCategory=function selectCategory(category){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:SELECT_CATEGORY,payload:category});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Get all recipes\nexport var getAllRecipes=function getAllRecipes(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"\".concat(url,\"/api/recipes\"));case 3:res=_context3.sent;dispatch({type:GET_ALL_RECIPES,payload:res.data.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0.message);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Change edit mode\nexport var changeEditMode=function changeEditMode(mode){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:CHANGE_EDIT_MODE,payload:mode});if(mode===null){dispatch({type:ClEAR_EDIT_STATE});}case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// Save new recipe \nexport var saveNewRecipe=function saveNewRecipe(formData,imgData){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res,fd,configImg;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{'Content-Type':'application/json'}};_context5.next=4;return axios.post(\"\".concat(url,\"/api/recipes\"),formData,config);case 4:res=_context5.sent;if(!imgData){_context5.next=11;break;}fd=new FormData();fd.append('file',imgData,imgData.name);configImg={headers:{'Content-Type':'multi-part/formdata'}};_context5.next=11;return axios.put(\"\".concat(url,\"/api/recipes/\").concat(res.data.data._id,\"/photo\"),fd,configImg);case 11:dispatch({type:SAVE_RECIPE,payload:res.data.data});_context5.next=17;break;case 14:_context5.prev=14;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0.message);case 17:case\"end\":return _context5.stop();}}},_callee5,null,[[0,14]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};// Update recipe\nexport var updateRecipe=function updateRecipe(id,formData){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{'Content-Type':'application/json'}};_context6.next=4;return axios.put(\"\".concat(url,\"/api/recipes/\").concat(id),formData,config);case 4:res=_context6.sent;dispatch({type:SAVE_RECIPE,payload:res.data.data});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0.message);case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[0,8]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};// Select a recipe by id\nexport var selectEditRecipe=function selectEditRecipe(id){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.get(\"\".concat(url,\"/api/recipes?_id=\").concat(id));case 3:res=_context7.sent;dispatch({type:SELECT_EDIT_RECIPE,payload:res.data.data[0]});_context7.next=10;break;case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](0);console.error(_context7.t0.message);case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[0,7]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};// Delete recipe\nexport var deleteRecipe=function deleteRecipe(id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"\".concat(url,\"/api/recipes/\").concat(id));case 3:res=_context8.sent;console.log(res.data._id);dispatch({type:DELETE_RECIPE,payload:res.data._id});_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);console.log(_context8.t0.message);case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};// Save new category\nexport var saveCategory=function saveCategory(formData){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;config={headers:{'Content-Type':'application/json'}};_context9.next=4;return axios.post(\"\".concat(url,\"/api/categories\"),formData,config);case 4:res=_context9.sent;dispatch({type:ClOSE_ADD_CATEGORY_FORM,payload:res.data});_context9.next=10;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/admin/Desktop/ReactHillBrewing/client/src/actions/dashboard.js"],"names":["axios","url","CHANGE_EDIT_MODE","ClOSE_ADD_CATEGORY_FORM","SAVE_RECIPE","SELECT_EDIT_RECIPE","ClEAR_EDIT_STATE","GET_CATEGORIES","GET_ALL_RECIPES","SELECT_CATEGORY","DELETE_RECIPE","getCategories","dispatch","get","res","type","payload","data","console","error","message","selectCategory","category","getAllRecipes","changeEditMode","mode","saveNewRecipe","formData","imgData","config","headers","post","fd","FormData","append","name","configImg","put","_id","log","updateRecipe","id","selectEditRecipe","deleteRecipe","delete","saveCategory"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { url } from '../config';\n\nexport const CHANGE_EDIT_MODE = 'CHANGE_EDIT_MODE';\nexport const ClOSE_ADD_CATEGORY_FORM = 'CLOSE_ADD_CATEGORY_FORM';\nexport const SAVE_RECIPE = 'SAVE_RECIPE';\nexport const SELECT_EDIT_RECIPE = 'SELECT_EDIT_RECIPE';\nexport const ClEAR_EDIT_STATE = 'CLEAR_EDIT_STATE';\nexport const GET_CATEGORIES = 'GET_CATEGORIES';\nexport const GET_ALL_RECIPES = 'GET_ALL_RECIPES';\nexport const SELECT_CATEGORY = 'SELECT_CATEGORY';\nexport const DELETE_RECIPE = 'DELETE_RECIPE';\n\n\n// Get categories\nexport const getCategories = () => async dispatch => {\n    try {\n        const res = await axios.get(`${url}/api/categories`);\n \n        dispatch({\n            type: GET_CATEGORIES,\n            payload: res.data.data \n        })\n    } catch (err) {\n         console.error(err.message);\n    } \n }\n\n// Select category\nexport const selectCategory = category => async dispatch => {\n    dispatch({\n        type: SELECT_CATEGORY,\n        payload: category\n    })\n}\n\n\n // Get all recipes\nexport const getAllRecipes = () => async dispatch => {\n    try {\n        const res = await axios.get(`${url}/api/recipes`);\n\n        dispatch({\n            type: GET_ALL_RECIPES,\n            payload: res.data.data\n        })\n    } catch (err) {\n        console.error(err.message);\n    }\n}\n \n\n\n// Change edit mode\nexport const changeEditMode = mode => async dispatch => {\n    dispatch({\n        type: CHANGE_EDIT_MODE,\n        payload: mode\n    })\n\n    if(mode === null) {\n        dispatch({\n            type: ClEAR_EDIT_STATE\n        })\n    }\n}\n\n\n\n// Save new recipe \nexport const saveNewRecipe = (formData, imgData) => async dispatch => {\n    try {\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const res = await axios.post(`${url}/api/recipes`, formData, config);\n        \n        // upload image\n\n        if(imgData) {\n            const fd = new FormData();\n            fd.append('file', imgData, imgData.name)\n            \n            const configImg = {\n                headers: {\n                    'Content-Type': 'multi-part/formdata'\n                }\n            }\n    \n            await axios.put(`${url}/api/recipes/${res.data.data._id}/photo`, fd, configImg)\n        }\n       \n\n        dispatch({\n            type: SAVE_RECIPE,\n            payload: res.data.data\n        })\n        \n    } catch (err) {\n        console.log(err.message);\n    }\n} \n\n\n// Update recipe\nexport const updateRecipe = (id, formData) => async dispatch => {\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const res = await axios.put(`${url}/api/recipes/${id}`, formData, config);\n\n        dispatch({\n            type: SAVE_RECIPE,\n            payload: res.data.data\n        })\n    } catch (err) {\n        console.log(err.message)\n    }\n}\n\n\n// Select a recipe by id\nexport const selectEditRecipe = id => async dispatch => {\n    try {\n        const res = await axios.get(`${url}/api/recipes?_id=${id}`);\n \n        dispatch({\n            type: SELECT_EDIT_RECIPE,\n            payload: res.data.data[0] \n        })\n        \n    } catch (err) {\n         console.error(err.message);\n    } \n}\n\n\n// Delete recipe\nexport const deleteRecipe = id => async dispatch => {\n    try {\n        const res = await axios.delete(`${url}/api/recipes/${id}`);\n\n    console.log(res.data._id);\n\n    dispatch({\n        type: DELETE_RECIPE,\n        payload: res.data._id\n    })\n\n    } catch (err) {\n        console.log(err.message);\n        \n    }\n}\n\n\n// Save new category\nexport const saveCategory = (formData) => async dispatch => {\n    try {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const res = await axios.post(`${url}/api/categories`, formData, config);\n\n\n        dispatch({\n            type: ClOSE_ADD_CATEGORY_FORM,\n            payload: res.data\n        })\n\n    } catch (err) {\n        \n    }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}