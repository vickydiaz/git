{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/ReactHillBrewing/client/src/components/dashboard/edits/AddRecipeForm.js\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { saveNewRecipe, updateRecipe, deleteRecipe } from '../../../actions/dashboard';\nimport { url } from '../../../config';\nimport Alert from '../layout/Alert';\nimport { setAlert } from '../../../actions/alert';\nimport ParagraphInput from './ParagraphInput';\n\nconst AddRecipeForm = ({\n  saveNewRecipe,\n  updateRecipe,\n  setAlert,\n  deleteRecipe,\n  loggedInUserId,\n  categories,\n  dashboard: {\n    editMode,\n    editRecipe\n  }\n}) => {\n  const [formData, setFormdata] = useState({\n    title: '',\n    subtitle: '',\n    category: ''\n  });\n  const [paragraphData, setParagraphData] = useState([{\n    title: 'MALT/GRAIN BILL',\n    body: ''\n  }, {\n    title: 'HOPS/SCHEDULE',\n    body: ''\n  }, {\n    title: 'YEAST',\n    body: ''\n  }, {\n    title: 'DIRECTIONS',\n    body: ''\n  }]);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const {\n    title,\n    subtitle,\n    category\n  } = formData;\n  useEffect(() => {\n    editMode === null && setSelectedImage(null);\n  }, [editMode]);\n  useEffect(() => {\n    if (editMode === 'editRecipe') {\n      const {\n        category,\n        title,\n        subtitle,\n        paragraphs,\n        image\n      } = editRecipe;\n      setFormdata({\n        title,\n        subtitle,\n        category,\n        image\n      });\n      setParagraphData(paragraphs);\n    }\n  }, [editMode, editRecipe]);\n\n  const onChange = e => {\n    setFormdata({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const onTitleChange = e => {\n    setParagraphData([...paragraphData], paragraphData[e.target.name].title = e.target.value);\n  };\n\n  const onBodyChange = e => {\n    setParagraphData([...paragraphData], paragraphData[e.target.name].body = e.target.value);\n  };\n\n  const selectImageFile = e => {\n    e.preventDefault();\n    setSelectedImage(e.target.files[0]);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (title === '') {\n      return setAlert('Please fill in title', 'danger');\n    }\n\n    if (category === '') {\n      return setAlert('Please add a category', 'danger');\n    }\n\n    const paragraphs = paragraphData.filter(paragraph => paragraph.body !== '');\n    const packagedFormData = {\n      user: loggedInUserId,\n      title,\n      subtitle,\n      category,\n      paragraphs\n    };\n\n    if (editMode === 'addRecipe') {\n      saveNewRecipe(packagedFormData, selectedImage);\n      setSelectedImage(null);\n    } else {\n      updateRecipe(editRecipe._id, packagedFormData);\n    } // eslint-disable-next-line no-restricted-globals\n    // location.reload();\n    // add recipe in reducer\n\n  };\n\n  const onDelete = () => {\n    // eslint-disable-next-line no-restricted-globals\n    const yes = confirm(\"Sure to delete?\");\n\n    if (yes) {\n      deleteRecipe(editRecipe._id);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dash-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dash-card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"Add new Recipe\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dash-card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, editRecipe && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"preview-image\",\n    src: `${url}/uploads/recipe-img/${editRecipe.image}`,\n    alt: \"recipeImage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"custom-file\",\n    type: \"file\",\n    accept: \".jpg, .jpeg, .png\",\n    onChange: selectImageFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Recipe Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    placeholder: \"Enter recipe name\",\n    name: \"title\",\n    value: title,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, \"Subtitle\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"subtitle\",\n    type: \"text\",\n    placeholder: \"Enter subtitle\",\n    name: \"subtitle\",\n    value: subtitle,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"category\",\n    className: \"select\",\n    name: \"category\",\n    value: category,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    defaultValue: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, \"Select a category\"), categories.filter(category => category.title !== 'Latest Recipe').map((category, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: index,\n    value: category.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 41\n    }\n  }, category.title)))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 27\n    }\n  }), paragraphData.map((paragraph, index) => /*#__PURE__*/React.createElement(ParagraphInput, {\n    key: index,\n    index: index,\n    paragraph: paragraph,\n    onTitleChange: onTitleChange,\n    onBodyChange: onBodyChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"center edit-btn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, \"Save recipe\"), editMode === 'editRecipe' && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"center edit-btn\",\n    onClick: onDelete,\n    style: {\n      marginLeft: '10px',\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 56\n    }\n  }, \"Delete Recipe\")))));\n};\n\nconst mapStateToProps = state => ({\n  dashboard: state.dashboard,\n  loggedInUserId: state.auth.user._id,\n  categories: state.category.categories\n});\n\nexport default connect(mapStateToProps, {\n  saveNewRecipe,\n  updateRecipe,\n  deleteRecipe,\n  setAlert\n})(AddRecipeForm);","map":{"version":3,"sources":["/Users/admin/Desktop/ReactHillBrewing/client/src/components/dashboard/edits/AddRecipeForm.js"],"names":["React","useState","useEffect","connect","saveNewRecipe","updateRecipe","deleteRecipe","url","Alert","setAlert","ParagraphInput","AddRecipeForm","loggedInUserId","categories","dashboard","editMode","editRecipe","formData","setFormdata","title","subtitle","category","paragraphData","setParagraphData","body","selectedImage","setSelectedImage","paragraphs","image","onChange","e","target","name","value","onTitleChange","onBodyChange","selectImageFile","preventDefault","files","onSubmit","filter","paragraph","packagedFormData","user","_id","onDelete","yes","confirm","map","index","marginLeft","backgroundColor","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { saveNewRecipe, updateRecipe, deleteRecipe } from '../../../actions/dashboard';\nimport { url } from '../../../config';\nimport Alert from '../layout/Alert';\nimport { setAlert } from '../../../actions/alert';\nimport ParagraphInput from './ParagraphInput';\n\n\nconst AddRecipeForm = ({ saveNewRecipe, updateRecipe, setAlert, deleteRecipe, loggedInUserId, categories, dashboard: { editMode, editRecipe } }) => {\n    const [formData, setFormdata] = useState({\n        title: '',\n        subtitle: '',\n        category: ''\n    });\n\n    const [paragraphData, setParagraphData] = useState([\n        { title: 'MALT/GRAIN BILL', body: '' },\n        { title: 'HOPS/SCHEDULE', body: '' },\n        { title: 'YEAST', body: '' },\n        { title: 'DIRECTIONS', body: '' }\n    ])\n\n    const [selectedImage, setSelectedImage] = useState(null);\n\n    const { title, subtitle, category } = formData;\n\n    useEffect(() => {\n        editMode === null && setSelectedImage(null);\n    }, [editMode])\n\n    useEffect(() => {\n        if (editMode === 'editRecipe') {\n            const { category, title, subtitle, paragraphs, image } = editRecipe;\n\n            setFormdata({\n                title,\n                subtitle,\n                category,\n                image\n            })\n\n            setParagraphData(paragraphs)\n        }\n    }, [editMode, editRecipe])\n\n    const onChange = (e) => {\n        setFormdata({\n            ...formData,\n            [e.target.name]: e.target.value\n        })\n    };\n\n    const onTitleChange = (e) => {\n        setParagraphData([\n\n            ...paragraphData\n            ],\n            paragraphData[e.target.name].title = e.target.value\n        )\n    }\n\n    const onBodyChange = (e) => {\n        setParagraphData([\n\n            ...paragraphData\n            ],\n            paragraphData[e.target.name].body = e.target.value\n        )\n    }\n\n\n    const selectImageFile = (e) => {\n        e.preventDefault();\n\n        setSelectedImage(e.target.files[0]);\n    };\n\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n\n        if (title === '') {\n            return setAlert('Please fill in title', 'danger')\n        }\n\n        if (category === '') {\n            return setAlert('Please add a category', 'danger')\n        }\n\n        const paragraphs = paragraphData.filter(paragraph => paragraph.body !== '');\n\n        const packagedFormData = {\n            user: loggedInUserId,\n            title,\n            subtitle,\n            category,\n            paragraphs\n        };\n\n        if(editMode === 'addRecipe') {\n            saveNewRecipe(packagedFormData, selectedImage);\n            setSelectedImage(null);\n\n        } else {\n            updateRecipe(editRecipe._id, packagedFormData);\n            \n        }\n\n        // eslint-disable-next-line no-restricted-globals\n        // location.reload();\n        // add recipe in reducer\n    }\n\n\n    const onDelete = () => {\n        // eslint-disable-next-line no-restricted-globals\n        const yes = confirm(\"Sure to delete?\");\n\n        if (yes) {\n            deleteRecipe(editRecipe._id);\n        }\n    }\n\n\n\n    return (\n        <div className=\"dash-card\">\n            <div className=\"dash-card-header\">\n                Add new Recipe\n            </div>\n            <div className=\"dash-card-body\">\n                <Alert />\n                <form onSubmit={onSubmit}>\n                    {editRecipe && (<img className=\"preview-image\" src={`${url}/uploads/recipe-img/${editRecipe.image}`} alt=\"recipeImage\"/>)}\n\n                    <input className=\"custom-file\" type=\"file\" accept=\".jpg, .jpeg, .png\" onChange={selectImageFile} />\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"name\">Recipe Name</label>\n                        <input id=\"name\" type=\"text\" placeholder=\"Enter recipe name\" name=\"title\" value={title} onChange={onChange} />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"subtitle\">Subtitle</label>\n                        <input id=\"subtitle\" type=\"text\" placeholder=\"Enter subtitle\" name=\"subtitle\" value={subtitle} onChange={onChange} />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"category\">Category</label>\n                        <select id=\"category\" className=\"select\" name=\"category\" value={category} onChange={onChange}>\n                            <option value=\"\" defaultValue>Select a category</option>\n                            \n\n                            {\n                                categories.filter(category => category.title !== 'Latest Recipe')\n                                    .map((category, index) => (\n                                        <option key={index} value={category.title} >{category.title}</option>\n                                    ))\n                            }\n\n\n                        </select>\n                    </div>\n                    <br /><br />\n\n                    {\n                        paragraphData.map((paragraph, index) => (\n                            <ParagraphInput key={index} index={index} paragraph={paragraph} onTitleChange={onTitleChange} onBodyChange={onBodyChange} />\n                        ))\n                    }\n\n                    <div className=\"edit-buttons\">\n\n                        <button className=\"center edit-btn\" type=\"submit\">Save recipe</button>\n                        {editMode === 'editRecipe' && (<button className=\"center edit-btn\" onClick={onDelete} style={{ marginLeft: '10px', backgroundColor: 'red' }}>Delete Recipe</button>)}\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\n\nconst mapStateToProps = state => ({\n    dashboard: state.dashboard,\n    loggedInUserId: state.auth.user._id,\n    categories: state.category.categories\n})\n\nexport default connect(mapStateToProps, { saveNewRecipe, updateRecipe, deleteRecipe, setAlert })(AddRecipeForm);\n"]},"metadata":{},"sourceType":"module"}