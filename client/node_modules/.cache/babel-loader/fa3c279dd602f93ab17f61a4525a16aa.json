{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/ReactHillBrewing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/ReactHillBrewing/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{url}from'../config';import{LOGIN_SUCCESS,GET_USER,REGISTER_SUCCESS,REGISTER_FAIL,LOGOUT}from'./types';// Load user\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(url+'/api/auth/me');case 3:res=_context.sent;dispatch({type:GET_USER,payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// Login user\nexport var login=function login(name,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'}};body=JSON.stringify({name:name,password:password});_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(url,\"/api/auth/login\"),body,config);case 5:res=_context2.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Register user\nexport var register=function register(name,password){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({name:name,password:password});_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(url,\"/api/auth/register\"),body,config);case 5:res=_context3.sent;console.log(res);dispatch({type:REGISTER_SUCCESS,payload:res.data});loadUser();_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](2);console.error(_context3.t0.message);dispatch({type:REGISTER_FAIL});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[2,11]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Logout user\nexport var logout=function logout(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:LOGOUT});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/admin/Desktop/ReactHillBrewing/client/src/actions/auth.js"],"names":["axios","url","LOGIN_SUCCESS","GET_USER","REGISTER_SUCCESS","REGISTER_FAIL","LOGOUT","loadUser","dispatch","get","res","type","payload","data","console","log","message","login","name","password","config","headers","body","JSON","stringify","post","register","error","logout"],"mappings":"mUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,WAApB,CAEA,OACIC,aADJ,CAEIC,QAFJ,CAGIC,gBAHJ,CAIIC,aAJJ,CAKIC,MALJ,KAMO,SANP,CASA;AACA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,kGAAM,iBAAMC,QAAN,gKAIJR,CAAAA,KAAK,CAACS,GAAN,CAAUR,GAAG,CAAG,cAAhB,CAJI,QAIhBS,GAJgB,eAMtBF,QAAQ,CAAC,CACLG,IAAI,CAAER,QADD,CAELS,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CANsB,+EAYtBC,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EAZsB,oEAAN,gEAAjB,CAgBP;AACA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,IAAD,CAAOC,QAAP,kGAAoB,kBAAMX,QAAN,0IAE/BY,MAF+B,CAEtB,CACXC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CADE,CAFsB,CAS/BC,IAT+B,CASxBC,IAAI,CAACC,SAAL,CAAe,CAAEN,IAAI,CAAJA,IAAF,CAAQC,QAAQ,CAARA,QAAR,CAAf,CATwB,yCAafnB,CAAAA,KAAK,CAACyB,IAAN,WAAcxB,GAAd,oBAAoCqB,IAApC,CAA0CF,MAA1C,CAbe,QAa3BV,GAb2B,gBAgBjCF,QAAQ,CAAC,CACLG,IAAI,CAAET,aADD,CAELU,OAAO,CAAEF,GAAG,CAACG,IAFR,CAAD,CAAR,CAhBiC,mFAuBjCC,OAAO,CAACC,GAAR,CAAY,aAAIC,OAAhB,EAvBiC,sEAApB,kEAAd,CA4BP;AACA,MAAO,IAAMU,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACR,IAAD,CAAOC,QAAP,kGAAoB,kBAAMX,QAAN,0IAElCY,MAFkC,CAEzB,CACXC,OAAO,CAAE,CACL,eAAgB,kBADX,CADE,CAFyB,CAQlCC,IARkC,CAQ3BC,IAAI,CAACC,SAAL,CAAe,CAAEN,IAAI,CAAJA,IAAF,CAAQC,QAAQ,CAARA,QAAR,CAAf,CAR2B,yCAWlBnB,CAAAA,KAAK,CAACyB,IAAN,WAAcxB,GAAd,uBAAuCqB,IAAvC,CAA6CF,MAA7C,CAXkB,QAW9BV,GAX8B,gBAYpCI,OAAO,CAACC,GAAR,CAAYL,GAAZ,EAEAF,QAAQ,CAAC,CACLG,IAAI,CAAEP,gBADD,CAELQ,OAAO,CAAEF,GAAG,CAACG,IAFR,CAAD,CAAR,CAKAN,QAAQ,GAnB4B,qFAsBpCO,OAAO,CAACa,KAAR,CAAc,aAAIX,OAAlB,EACAR,QAAQ,CAAC,CACLG,IAAI,CAAEN,aADD,CAAD,CAAR,CAvBoC,uEAApB,kEAAjB,CA8BP;AACA,MAAO,IAAMuB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,mGAAM,kBAAMpB,QAAN,sHACxBA,QAAQ,CAAC,CACLG,IAAI,CAAEL,MADD,CAAD,CAAR,CADwB,wDAAN,kEAAf","sourcesContent":["import axios from 'axios';\nimport { url } from '../config';\n\nimport {\n    LOGIN_SUCCESS,\n    GET_USER,\n    REGISTER_SUCCESS, \n    REGISTER_FAIL,\n    LOGOUT\n} from './types';\n\n\n// Load user\nexport const loadUser = () => async dispatch => {\n\n    try {\n\n        const res = await axios.get(url + '/api/auth/me');\n\n        dispatch({\n            type: GET_USER,\n            payload: res.data.data\n        })\n\n    } catch (err) {\n        console.log(err.message);\n    }\n}\n\n// Login user\nexport const login = (name, password) => async dispatch => {\n\n    const config = {\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    }\n\n    const body = JSON.stringify({ name, password });\n\n    try {\n\n        const res = await axios.post(`${url}/api/auth/login`, body, config);\n        \n        \n        dispatch({\n            type: LOGIN_SUCCESS,\n            payload: res.data\n        })\n\n\n    } catch (err) {\n        console.log(err.message);\n    }\n}\n\n\n// Register user\nexport const register = (name, password) => async dispatch => {\n\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    const body = JSON.stringify({ name, password })\n    \n    try {\n        const res = await axios.post(`${url}/api/auth/register`, body, config);\n        console.log(res);\n\n        dispatch({\n            type: REGISTER_SUCCESS,\n            payload: res.data\n        })\n\n        loadUser();\n\n    } catch (err) {\n        console.error(err.message);\n        dispatch({\n            type: REGISTER_FAIL,\n        })\n    }\n}\n\n\n// Logout user\nexport const logout = () => async dispatch => {\n    dispatch({\n        type: LOGOUT\n    })\n}"]},"metadata":{},"sourceType":"module"}